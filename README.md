# sx1262-ftdi-linux üì°

![Python](https://img.shields.io/badge/python-3.6+-blue.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)

Bare-metal Python –¥—Ä–∞–π–≤–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è LoRa-—Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä–æ–º **Semtech SX1262** –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ (userspace) Linux —á–µ—Ä–µ–∑ USB-to-SPI –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä –Ω–∞ –±–∞–∑–µ —á–∏–ø–∞ **FTDI FT232H**.

## üí° –û –ø—Ä–æ–µ–∫—Ç–µ

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–∏–º–µ—Ä–æ–≤ —Ä–∞–±–æ—Ç—ã —Å LoRa –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –æ–ø–∏—Ä–∞—é—Ç—Å—è –Ω–∞ –º–∞—Å—Å–∏–≤–Ω—ã–µ C++ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, RadioLib) –∏–ª–∏ –≥–æ—Ç–æ–≤—ã–µ –æ–±–µ—Ä—Ç–∫–∏ MicroPython, –∫–æ—Ç–æ—Ä—ã–µ —Å–∫—Ä—ã–≤–∞—é—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º –≤—Å—é —Ñ–∏–∑–∏–∫—É –æ–±—â–µ–Ω–∏—è —Å —á–∏–ø–æ–º. 

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã:
1. –ü–æ–Ω—è—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É SX1262 –∏ –Ω–∞—É—á–∏—Ç—å—Å—è —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–º "—Å—ã—Ä—ã–º–∏" –±–∞–π—Ç–∞–º–∏ –ø–æ SPI.
2. –û—Ç–ª–∞–∂–∏–≤–∞—Ç—å —Ä–∞–¥–∏–æ–∫–∞–Ω–∞–ª –ø—Ä—è–º–æ —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –Ω–∞ Linux –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–æ—à–∏–≤–∞—Ç—å –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞.
3. –†–∞–∑–æ–±—Ä–∞—Ç—å "–ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏", –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –æ–ø–∏—Å–∞–Ω—ã –≤ –¥–∞—Ç–∞—à–∏—Ç–∞—Ö –Ω–∞–ø—Ä—è–º—É—é (–ø–∏—Ç–∞–Ω–∏–µ TCXO, –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–Ω—Ç–µ–Ω–Ω–æ–π, —Å–¥–≤–∏–≥–∏ —á–∞—Å—Ç–æ—Ç—ã).

–í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω **Transmitter (–ü–µ—Ä–µ–¥–∞—Ç—á–∏–∫)**, –∫–æ—Ç–æ—Ä—ã–π —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø–∞–∫–µ—Ç, –¥–æ–∂–∏–¥–∞–µ—Ç—Å—è –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è `TxDone` –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç —à–∏–Ω—É.

## ‚öôÔ∏è –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∏ –†–∞—Å–ø–∏–Ω–æ–≤–∫–∞

- **–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä:** –õ—é–±–æ–π –º–æ–¥—É–ª—å –Ω–∞ —á–∏–ø–µ FTDI FT232H (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π –¥–≤–∏–∂–æ–∫ MPSSE –¥–ª—è SPI/I2C).
- **LoRa –ú–æ–¥—É–ª—å:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ –º–æ–¥—É–ª—è—Ö Seeed Studio SX1262 (—Å TCXO 1.7V –∏ –µ–¥–∏–Ω—ã–º –ø–∏–Ω–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–Ω—Ç–µ–Ω–Ω—ã–º –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–æ–º RF Switch).

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (FT232H ‚ûî SX1262)

| FT232H Pin | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –≤ MPSSE | SX1262 Pin | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- | :--- |
| **AD0** | SCK | SCK | –¢–∞–∫—Ç–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª SPI |
| **AD1** | MOSI | MOSI | –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö (Master Out) |
| **AD2** | MISO | MISO | –ü—Ä–∏–µ–º –¥–∞–Ω–Ω—ã—Ö (Master In) |
| **AD3** | CS | NSS | –í—ã–±–æ—Ä —á–∏–ø–∞ (Chip Select) |
| **AD4** | GPIO (–í—Ö–æ–¥) | BUSY | –§–ª–∞–≥ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏ —á–∏–ø–∞ (High = –∑–∞–Ω—è—Ç) |
| **AD5** | GPIO (–í—ã—Ö–æ–¥) | RF_SW | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–Ω—Ç–µ–Ω–Ω–æ–π (High = TX, Low = RX) |
| **AD6** | GPIO (–í—Ö–æ–¥) | DIO1 | –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –æ—Ç –º–æ–¥–µ–º–∞ (TxDone / RxDone) |
| **3.3V** | Power | VCC | –ü–∏—Ç–∞–Ω–∏–µ –º–æ–¥—É–ª—è |
| **GND** | Ground | GND | –û–±—â–∞—è –∑–µ–º–ª—è |

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   –î–ª—è —Ä–∞–±–æ—Ç—ã —Å FTDI —á–µ—Ä–µ–∑ `libusb` —Ç—Ä–µ–±—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `pyftdi`:
   ```bash
   pip3 install pyftdi
   ```
   *(–í —Å–∏—Å—Ç–µ–º–∞—Ö Linux –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤–∏–ª `udev`, —á—Ç–æ–±—ã –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ USB –±–µ–∑ `sudo`)*.

2. **–£–∑–Ω–∞–π—Ç–µ –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ FTDI –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞:**
   –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –ø–ª–∞—Ç—É –ø–æ USB –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —É—Ç–∏–ª–∏—Ç—É:
   ```bash
   ftdi_urls.py
   ```
   –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π URL (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ftdi://ftdi:232h:1:1a/1`).

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–∫—Ä–∏–ø—Ç:**
   –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `test_spi.py` –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à URL –≤ —Å—Ç—Ä–æ–∫—É –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:
   ```python
   spi.configure('ftdi://ftdi:232h:1:1a/1')
   ```

4. **–ó–∞–ø—É—Å–∫:**
   ```bash
   python3 test_spi.py
   ```

## üß† –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏ "–ú–∞–≥–∏—è" –±–∏–±–ª–∏–æ—Ç–µ–∫

–í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–µ–≤–µ—Ä—Å-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥–∞ –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ (RadioLib / MicroPython) –±—ã–ª–∏ —Ä–µ—à–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –Ω—é–∞–Ω—Å—ã, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –≤ —ç—Ç–æ–º –∫–æ–¥–µ:

### 1. –¢–∞–π–Ω–∞ SyncWord (0x2B ‚ûî 0x24B4)
–í —Å—Ç–∞—Ä—ã—Ö —á–∏–ø–∞—Ö (SX127x) —Ä–µ–≥–∏—Å—Ç—Ä `SyncWord` –∑–∞–Ω–∏–º–∞–ª 1 –±–∞–π—Ç (—Å—Ç–∞–Ω–¥–∞—Ä—Ç `0x12`, `0x34` –∏–ª–∏ `0x2b` –¥–ª—è Meshtastic). –í –Ω–æ–≤–æ–º SX1262 —ç—Ç–æ—Ç —Ä–µ–≥–∏—Å—Ç—Ä **–¥–≤—É—Ö–±–∞–π—Ç–æ–≤—ã–π**. 
–í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: –∫–æ–≥–¥–∞ –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ –∏–º 1 –±–∞–π—Ç (`0x2b`), –æ–Ω–∏ –Ω–µ–∑–∞–º–µ—Ç–Ω–æ —Ä–∞–∑–±–∏–≤–∞—é—Ç –µ–≥–æ –Ω–∞ –ø–æ–ª—É–±–∞–π—Ç—ã –∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç –≤ –º–∞—Å–∫—É Semtech `0xY4Z4`. –í –∏—Ç–æ–≥–µ —á–∏–ø —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç —Å–ª–æ–≤–æ `0x24B4`. –í –Ω–∞—à–µ–º —Å–∫—Ä–∏–ø—Ç–µ –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–∂–µ –≤—ã—á–∏—Å–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞–ø—Ä—è–º—É—é.

### 2. –ü–∏—Ç–∞–Ω–∏–µ TCXO –∏ "–ì—É–ª—è—é—â–∏–π" –≤–æ–¥–æ–ø–∞–¥ SDR
–ï—Å–ª–∏ —É –≤–∞—à–µ–≥–æ –º–æ–¥—É–ª—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–≤–∞—Ä—Ü —Å —Ç–µ—Ä–º–æ–∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–µ–π (TCXO), —á–∏–ø –Ω–µ –∑–∞–≤–µ–¥–µ—Ç—Å—è –Ω–∞ —Ç–æ—á–Ω–æ–π —á–∞—Å—Ç–æ—Ç–µ –±–µ–∑ –∫–æ–º–∞–Ω–¥—ã –≤–∫–ª—é—á–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏—è –Ω–∞ –ø–∏–Ω `DIO3`. –ú–æ–¥—É–ª–∏ Seeed —Ç—Ä–µ–±—É—é—Ç 1.7 –í–æ–ª—å—Ç–∞. –ï—Å–ª–∏ –ø–æ–¥–∞—Ç—å 3.3V –∏–ª–∏ –Ω–µ –ø–æ–¥–∞—Ç—å –Ω–∏—á–µ–≥–æ, —á–∞—Å—Ç–æ—Ç–∞ PLL –Ω–µ –∑–∞–ª–æ—á–∏—Ç—Å—è, –∏ —Å–∏–≥–Ω–∞–ª –±—É–¥–µ—Ç —Ö–∞–æ—Ç–∏—á–Ω–æ "–≥—É–ª—è—Ç—å" –ø–æ —ç—Ñ–∏—Ä—É –Ω–∞ –º–µ–≥–∞–≥–µ—Ä—Ü—ã. –†–µ—à–µ–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π `SetDio3AsTcxoCtrl (1.7V)`.

### 3. –§–∞–Ω—Ç–æ–º–Ω—ã–µ –æ—à–∏–±–∫–∏ SPI (–ú—É—Å–æ—Ä –≤ —Å—Ç–∞—Ä—à–∏—Ö –±–∞–π—Ç–∞—Ö)
–ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Å—Ç–∞—Ç—É—Å–∞ –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã—Ö –æ—à–∏–±–æ–∫ (`GetDeviceErrors`) —Å–¥–≤–∏–≥–æ–≤—ã–π —Ä–µ–≥–∏—Å—Ç—Ä SPI –º–æ–∂–µ—Ç –≤—ã–ø–ª–µ–≤—ã–≤–∞—Ç—å "–∑–∞—Å—Ç—Ä—è–≤—à–∏–π" –±–∞–π—Ç —Å—Ç–∞—Ç—É—Å–∞ –≤ —Å—Ç–∞—Ä—à–∏–µ –±–∏—Ç—ã –æ—Ç–≤–µ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `0xA200`), –ø—É–≥–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞. –í –∫–æ–¥–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∂–µ—Å—Ç–∫–∞—è –º–∞—Å–∫–∞ `& 0x01FF`, –æ—Ç—Å–µ–∫–∞—é—â–∞—è SPI-–º—É—Å–æ—Ä –∏ –æ—Å—Ç–∞–≤–ª—è—é—â–∞—è —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ 9 –±–∏—Ç–æ–≤ –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã—Ö –æ—à–∏–±–æ–∫ —á–∏–ø–∞ SX1262.

## üõ†Ô∏è –í –ø–ª–∞–Ω–∞—Ö
- [x] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–∞ (TX) —Å –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–º –æ–∂–∏–¥–∞–Ω–∏–µ–º –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π.
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –ø—Ä–∏–µ–º–Ω–∏–∫–∞ (RX) —Å —Ä–µ–∂–∏–º–æ–º RxContinuous –∏ —á—Ç–µ–Ω–∏–µ–º RSSI/SNR.

---
*Contributions and forks are welcome!*
